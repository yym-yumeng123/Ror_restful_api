### 歌单标签实现分析

音乐标签是分层级的, 对于音乐来说, 有 语种,风格, 语种有华语, 日语等, 风格又有安静 流行, 上下级的感觉

### 用一张表

由于他们有层级关系，所以可以添加一个parent_id来表示他的父类；第一层的parent_id为null；如果要添加三级，只需要通过parent_id关联就行了


### 标签与歌单的关联关系

用三张表实现: 

歌单表: 已经实现了; 
标签表: 有了保存标签，Id，标签值。
歌单和标签映射表: 用来保存歌单，标签之间的关系。

### 标签模型
```zsh
bin/rails g model Tag parent:references title:string user:references
```

```rb
class Tag < ApplicationRecord
  # 一个标签属于一个用户
  belongs_to :user

  # 一个标签有多个子标签, 类名为 Tag, 外键id 为 parent_id
  has_many :childs, class_name: "Tag", foreign_key: "parent_id"
  # 一个标签可以属于一个标签
  # optional: true：表示parent_id为可选
  belongs_to :parent, class_name: "Tag", optional: true

  validates :title, presence: true, length: {maximum: 15}
end

```